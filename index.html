<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiteboard - Points & Lines</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <header class="toolbar">
            <h1>Whiteboard</h1>
            <div class="tools">
                <!-- Mode Tools -->
                <div class="tool-group">
                    <button id="addMode" class="tool-btn icon-only active" title="Add Point (A)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="6" stroke="currentColor" stroke-width="2"/>
                            <line x1="10" y1="4" x2="10" y2="16" stroke="currentColor" stroke-width="2"/>
                            <line x1="4" y1="10" x2="16" y2="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <button id="moveMode" class="tool-btn icon-only" title="Move Point (M)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 2L10 18M10 2L6 6M10 2L14 6M10 18L6 14M10 18L14 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M2 10L18 10M2 10L6 6M2 10L6 14M18 10L14 6M18 10L14 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button id="connectMode" class="tool-btn icon-only" title="Connect Points (C)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="4" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                            <circle cx="16" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                            <line x1="7" y1="10" x2="13" y2="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <button id="deleteMode" class="tool-btn icon-only" title="Delete (D)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="2"/>
                            <line x1="6" y1="6" x2="14" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="14" y1="6" x2="6" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button id="fillMode" class="tool-btn icon-only" title="Fill Region (F)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 4L10 10L16 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 10V16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M6 16H14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <circle cx="15" cy="14" r="2" fill="currentColor"/>
                        </svg>
                    </button>
                    <button id="selectMode" class="tool-btn icon-only" title="Select Group (S)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2" stroke-dasharray="3 2"/>
                            <circle cx="7" cy="10" r="2" fill="currentColor"/>
                            <circle cx="13" cy="7" r="2" fill="currentColor"/>
                            <circle cx="13" cy="13" r="2" fill="currentColor"/>
                        </svg>
                    </button>
                </div>

                <div class="separator"></div>

                <!-- Group Operations (visible when in select mode with selection) -->
                <div class="tool-group" id="groupOps">
                    <button id="moveGroup" class="tool-btn icon-only" title="Move Selection (hold and drag)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="4" y="4" width="8" height="8" stroke="currentColor" stroke-width="2" stroke-dasharray="2 2"/>
                            <rect x="8" y="8" width="8" height="8" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <button id="duplicateGroup" class="tool-btn icon-only" title="Duplicate Selection">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="5" width="9" height="9" rx="1" stroke="currentColor" stroke-width="2"/>
                            <rect x="8" y="3" width="9" height="9" rx="1" stroke="currentColor" stroke-width="2" fill="var(--bg-secondary)"/>
                        </svg>
                    </button>
                    <button id="flipHGroup" class="tool-btn icon-only" title="Flip Horizontal">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 5L4 15L8 10L4 5Z" fill="currentColor"/>
                            <path d="M16 5L16 15L12 10L16 5Z" stroke="currentColor" stroke-width="2"/>
                            <line x1="10" y1="3" x2="10" y2="17" stroke="currentColor" stroke-width="2" stroke-dasharray="2 2"/>
                        </svg>
                    </button>
                    <button id="flipVGroup" class="tool-btn icon-only" title="Flip Vertical">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M5 4L15 4L10 8L5 4Z" fill="currentColor"/>
                            <path d="M5 16L15 16L10 12L5 16Z" stroke="currentColor" stroke-width="2"/>
                            <line x1="3" y1="10" x2="17" y2="10" stroke="currentColor" stroke-width="2" stroke-dasharray="2 2"/>
                        </svg>
                    </button>
                    <button id="mergePoints" class="tool-btn icon-only" title="Merge 2 Points into 1">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="5" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                            <circle cx="15" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                            <path d="M8 10H12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M10 7L12 10L10 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button id="deleteGroup" class="tool-btn icon-only danger" title="Delete Selection">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 6H16M6 6V16C6 17 7 18 8 18H12C13 18 14 17 14 16V6M8 6V4C8 3 9 2 10 2C11 2 12 3 12 4V6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button id="clearSelection" class="tool-btn icon-only" title="Clear Selection (Esc)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                            <line x1="7" y1="7" x2="13" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="13" y1="7" x2="7" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>

                <div class="separator"></div>

                <!-- Color -->
                <label class="color-picker-label" title="Select Color">
                    <input type="color" id="colorPicker" value="#3b82f6">
                </label>

                <div class="separator"></div>

                <!-- History -->
                <div class="tool-group">
                    <button id="undoBtn" class="tool-btn icon-only" title="Undo (Ctrl+Z)" disabled>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 8H12C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16H8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M7 5L4 8L7 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button id="redoBtn" class="tool-btn icon-only" title="Redo (Ctrl+Shift+Z)" disabled>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M16 8H8C5.79086 8 4 9.79086 4 12C4 14.2091 5.79086 16 8 16H12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M13 5L16 8L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>

                <div class="separator"></div>

                <!-- File Operations -->
                <div class="tool-group">
                    <button id="downloadSvg" class="tool-btn icon-only" title="Download SVG">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 3V13M10 13L6 9M10 13L14 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M3 17H17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button id="importSvg" class="tool-btn icon-only" title="Import SVG">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 13V3M10 3L6 7M10 3L14 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M3 17H17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <input type="file" id="svgFileInput" accept=".svg" style="display: none;">
                    <button id="clearAll" class="tool-btn icon-only danger" title="Clear All">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 6H16M6 6V16C6 17 7 18 8 18H12C13 18 14 17 14 16V6M8 6V4C8 3 9 2 10 2C11 2 12 3 12 4V6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>

                <div class="separator"></div>

                <!-- Zoom Controls -->
                <div class="tool-group">
                    <button id="zoomIn" class="tool-btn icon-only" title="Zoom In (+)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="9" cy="9" r="6" stroke="currentColor" stroke-width="2"/>
                            <line x1="9" y1="6" x2="9" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="6" y1="9" x2="12" y2="9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="13.5" y1="13.5" x2="17" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button id="zoomOut" class="tool-btn icon-only" title="Zoom Out (-)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="9" cy="9" r="6" stroke="currentColor" stroke-width="2"/>
                            <line x1="6" y1="9" x2="12" y2="9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="13.5" y1="13.5" x2="17" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button id="zoomReset" class="tool-btn icon-only" title="Reset Zoom (0)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="9" cy="9" r="6" stroke="currentColor" stroke-width="2"/>
                            <line x1="13.5" y1="13.5" x2="17" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <text x="9" y="12" text-anchor="middle" font-size="8" fill="currentColor" font-weight="bold">1:1</text>
                        </svg>
                    </button>
                    <span id="zoomLevel" class="zoom-display" title="Current zoom level">100%</span>
                </div>

                <div class="separator"></div>

                <!-- Visibility Toggles -->
                <div class="tool-group">
                    <label class="checkbox-btn" title="Show Points (P)">
                        <input type="checkbox" id="showPoints" checked>
                        <div class="checkbox-icon">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <circle cx="10" cy="10" r="4" fill="currentColor"/>
                                <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                    </label>
                    <label class="checkbox-btn" title="Show Lines (L)">
                        <input type="checkbox" id="showLines" checked>
                        <div class="checkbox-icon">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <line x1="4" y1="16" x2="16" y2="4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                    </label>
                </div>
            </div>
            <div class="status">
                <span id="statusText">Click to add a point</span>
            </div>
        </header>
        <main class="whiteboard-container">
            <svg id="whiteboard" class="whiteboard">
                <defs>
                    <filter id="pointShadow" x="-50%" y="-50%" width="200%" height="200%">
                        <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.2"/>
                    </filter>
                </defs>
                <g id="transformGroup">
                    <g id="fillsLayer"></g>
                    <g id="linesLayer"></g>
                    <g id="pointsLayer"></g>
                </g>
            </svg>
        </main>
    </div>
    <script src="app.js"></script>
</body>
</html>
